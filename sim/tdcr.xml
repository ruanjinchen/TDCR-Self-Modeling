<?xml version="1.0"?>
<mujoco model="TDCR">

  <visual>
    <global offwidth="1280" offheight="720"/>
  </visual>

  <include file="scene.xml"/>

  <option timestep="0.002" gravity="0 0 -9.81"/>

  <asset>
    <mesh name="base_mesh" file="base.stl"/>
  </asset>

  <default>
    <geom density="25" friction="0.8 0.1 0.1" rgba="0.6 0.6 0.9 1"/>
    <joint damping="0.1" armature="0.01" limited="false"/>
    <site  size="0.002" rgba="1 0.4 0.4 1"/>
  </default>

  <worldbody>
    <camera name="camera1" pos="0.000 -0.500 0.400" quat="0.77334 0.63399 -0.00000 -0.00000" fovy="45"/>
    <camera name="camera2" pos="0.000 0.500 0.400" quat="-0.00000 0.00000 0.63399 0.77334" fovy="45"/>
    <camera name="camera3" pos="0.500 0.000 0.400" quat="0.54684 0.44830 0.44830 0.54684" fovy="45"/>
    <camera name="camera4" pos="-0.500 0.000 0.400" quat="-0.54684 -0.44830 0.44830 0.54684" fovy="45"/>

    <body name="base" pos="0 0 0.174">
      <!-- 屎黄色，174毫米离地，174要写在body里而不是geom -->
      <geom type="mesh" mesh="base_mesh" rgba="0.902 0.886 0.725 0" contype="0" conaffinity="0"/>
      <site name="b00" pos=" 0.0125  0         -0.0085"/>
      <site name="b01" pos="-0.00625  0.010825 -0.0085"/>
      <site name="b02" pos="-0.00625 -0.010825 -0.0085"/>

      <!-- ===== DISC0 (fixed) ===== -->
      <!-- 写不写ball joint关系不大，反正都动不了，肌腱拉动的时候，disc0只有上半段有肌腱运动 -->
      <!-- geom里的size只控制半高，一半的厚度，球关节的位置在body的pos里调整 -->
      <body name="disc0" pos="0 0 0.00895">
        <joint name="ball0" type="ball"/>
        <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="1.0 0.0 0.0 1.0"/>
        <site name="s00" pos=" 0.0125  0         0"/>
        <site name="s01" pos="-0.00625  0.010825 0"/>
        <site name="s02" pos="-0.00625 -0.010825 0"/>

        <!-- ===== DISC1 ===== -->
        <body name="disc1" pos="0 0 0.016">
          <joint name="ball1" type="ball"/>
          <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="1.0 0.4 0.0 1.0"/>
          <site name="s10" pos=" 0.0125  0         0"/>
          <site name="s11" pos="-0.00625  0.010825 0"/>
          <site name="s12" pos="-0.00625 -0.010825 0"/>

          <!-- ===== DISC2 ===== -->
          <body name="disc2" pos="0 0 0.016">
            <joint name="ball2" type="ball"/>
            <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="1.0 0.8 0.0 1.0"/>
            <site name="s20" pos=" 0.0125  0         0"/>
            <site name="s21" pos="-0.00625  0.010825 0"/>
            <site name="s22" pos="-0.00625 -0.010825 0"/>

            <!-- ===== DISC3 ===== -->
            <body name="disc3" pos="0 0 0.016">
              <joint name="ball3" type="ball"/>
              <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="0.8 1.0 0.0 1.0"/>
              <site name="s30" pos=" 0.0125  0         0"/>
              <site name="s31" pos="-0.00625  0.010825 0"/>
              <site name="s32" pos="-0.00625 -0.010825 0"/>

              <!-- ===== DISC4 ===== -->
              <body name="disc4" pos="0 0 0.016">
                <joint name="ball4" type="ball"/>
                <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="0.4 1.0 0.0 1.0"/>
                <site name="s40" pos=" 0.0125  0         0"/>
                <site name="s41" pos="-0.00625  0.010825 0"/>
                <site name="s42" pos="-0.00625 -0.010825 0"/>

                <!-- ===== DISC5 (interface between lower & upper) ===== -->
                <body name="disc5" pos="0 0 0.016">
                  <joint name="ball5" type="ball"/>
                  <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="0.0 1.0 0.0 1.0"/>
                  <site name="s50" pos=" 0.0125  0         0"/>
                  <site name="s51" pos="-0.00625  0.010825 0"/>
                  <site name="s52" pos="-0.00625 -0.010825 0"/>

                  <!-- ===== DISC6 ===== -->
                  <body name="disc6" pos="0 0 0.016">
                    <joint name="ball6" type="ball"/>
                    <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="0.0 1.0 0.4 1.0"/>
                    <site name="s60" pos=" 0.0125  0         0"/>
                    <site name="s61" pos="-0.00625  0.010825 0"/>
                    <site name="s62" pos="-0.00625 -0.010825 0"/>

                    <!-- ===== DISC7 ===== -->
                    <body name="disc7" pos="0 0 0.016">
                      <joint name="ball7" type="ball"/>
                      <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="0.0 1.0 0.8 1.0"/>
                      <site name="s70" pos=" 0.0125  0         0"/>
                      <site name="s71" pos="-0.00625  0.010825 0"/>
                      <site name="s72" pos="-0.00625 -0.010825 0"/>

                      <!-- ===== DISC8 ===== -->
                      <body name="disc8" pos="0 0 0.016">
                        <joint name="ball8" type="ball"/>
                        <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="0.0 0.8 1.0 1.0"/>
                        <site name="s80" pos=" 0.0125  0         0"/>
                        <site name="s81" pos="-0.00625  0.010825 0"/>
                        <site name="s82" pos="-0.00625 -0.010825 0"/>

                        <!-- ===== DISC9 (TIP) ===== -->
                        <body name="disc9" pos="0 0 0.016">
                          <joint name="ball9" type="ball"/>
                          <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="0.0 0.4 1.0 1.0"/>
                          <site name="s90" pos=" 0.0125  0         0"/>
                          <site name="s91" pos="-0.00625  0.010825 0"/>
                          <site name="s92" pos="-0.00625 -0.010825 0"/>
                          
                          <!-- ===== DISC10 (TIP) ===== -->
                          <body name="disc10" pos="0 0 0.016">
                            <joint name="ball10" type="ball"/>
                            <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="0.0 0.0 1.0 1.0"/>
                            <site name="s100" pos=" 0.0125  0         0"/>
                            <site name="s101" pos="-0.00625  0.010825 0"/>
                            <site name="s102" pos="-0.00625 -0.010825 0"/>
                            
                            <!-- ===== DISC11 (TIP) ===== -->
                            <body name="disc11" pos="0 0 0.016">
                              <joint name="ball11" type="ball"/>
                              <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="0.4 0.0 1.0 1.0"/>
                              <site name="s110" pos=" 0.0125  0         0"/>
                              <site name="s111" pos="-0.00625  0.010825 0"/>
                              <site name="s112" pos="-0.00625 -0.010825 0"/>
                              
                              <!-- ===== DISC12 (TIP) ===== -->
                              <body name="disc12" pos="0 0 0.016">
                                <joint name="ball12" type="ball"/>
                                <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="0.8 0.0 1.0 1.0"/>
                                <site name="s120" pos=" 0.0125  0         0"/>
                                <site name="s121" pos="-0.00625  0.010825 0"/>
                                <site name="s122" pos="-0.00625 -0.010825 0"/>

                                <!-- ===== DISC13 (TIP) ===== -->
                                <body name="disc13" pos="0 0 0.016">
                                  <joint name="ball13" type="ball"/>
                                  <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="1.0 0.0 0.8 1.0"/>
                                  <site name="s130" pos=" 0.0125  0         0"/>
                                  <site name="s131" pos="-0.00625  0.010825 0"/>
                                  <site name="s132" pos="-0.00625 -0.010825 0"/>
                                    
                                  <!-- ===== DISC14 (TIP) ===== -->
                                  <body name="disc14" pos="0 0 0.016">
                                    <joint name="ball14" type="ball"/>
                                    <geom type="cylinder" size="0.02 0.008" contype="0" conaffinity="0" rgba="1.0 0.0 0.4 1.0"/>
                                    <site name="s140" pos=" 0.0125  0         0"/>
                                    <site name="s141" pos="-0.00625  0.010825 0"/>
                                    <site name="s142" pos="-0.00625 -0.010825 0"/>
                              
                                  </body><!-- disc14 end -->
                                </body><!-- disc13 end -->
                              </body><!-- disc12 end -->
                            </body><!-- disc11 end -->
                          </body><!-- disc10 end -->
                        </body><!-- disc9 end -->
                      </body><!-- disc8 end -->
                    </body><!-- disc7 end -->
                  </body><!-- disc6 end -->
                </body><!-- disc5 end -->
              </body><!-- disc4 end -->
            </body><!-- disc3 end -->
          </body><!-- disc2 end -->
        </body><!-- disc1 end -->
      </body><!-- disc0 end -->
    </body><!-- base end -->
  </worldbody>

  <tendon>
    <spatial name="tendon1">
      <site site="b00"/><site site="s00"/><site site="s10"/><site site="s20"/><site site="s30"/><site site="s40"/>
    </spatial>
    <spatial name="tendon2">
      <site site="b01"/><site site="s01"/><site site="s11"/><site site="s21"/><site site="s31"/><site site="s41"/>
    </spatial>
    <spatial name="tendon3">
      <site site="b02"/><site site="s02"/><site site="s12"/><site site="s22"/><site site="s32"/><site site="s42"/>
    </spatial>

    <spatial name="tendon4">
      <site site="s40"/><site site="s50"/><site site="s60"/><site site="s70"/><site site="s80"/><site site="s90"/>
    </spatial>
    <spatial name="tendon5">
      <site site="s41"/><site site="s51"/><site site="s61"/><site site="s71"/><site site="s81"/><site site="s91"/>
    </spatial>
    <spatial name="tendon6">
      <site site="s42"/><site site="s52"/><site site="s62"/><site site="s72"/><site site="s82"/><site site="s92"/>
    </spatial>
  
    <spatial name="tendon7">
      <site site="s90"/><site site="s100"/><site site="s110"/><site site="s120"/><site site="s130"/><site site="s140"/>
    </spatial>
    <spatial name="tendon8">
      <site site="s91"/><site site="s101"/><site site="s111"/><site site="s121"/><site site="s131"/><site site="s141"/>
    </spatial>
    <spatial name="tendon9">
      <site site="s92"/><site site="s102"/><site site="s112"/><site site="s122"/><site site="s132"/><site site="s142"/>
    </spatial>

  </tendon>

  <actuator>
    <!-- lower motors control discs 0-4 -->
    <position name="motor1" tendon="tendon1" kp="500" ctrlrange="0 0.04"/>
    <position name="motor2" tendon="tendon2" kp="500" ctrlrange="0 0.04"/>
    <position name="motor3" tendon="tendon3" kp="500" ctrlrange="0 0.04"/>

    <!-- middle motors control discs 5-9 -->
    <position name="motor4" tendon="tendon4" kp="500" ctrlrange="0 0.04"/>
    <position name="motor5" tendon="tendon5" kp="500" ctrlrange="0 0.04"/>
    <position name="motor6" tendon="tendon6" kp="500" ctrlrange="0 0.04"/>

    <!-- upper motors control discs 5-9 -->
    <position name="motor7" tendon="tendon7" kp="500" ctrlrange="0 0.04"/>
    <position name="motor8" tendon="tendon8" kp="500" ctrlrange="0 0.04"/>
    <position name="motor9" tendon="tendon9" kp="500" ctrlrange="0 0.04"/>
  </actuator>

</mujoco>